<div class="modal-backdrop" #modal (click)="onBackdropClick($event)">
  <div class="modal-content">
    <button class="btn close-btn" (click)="closeModal()">&times;</button>
    <h2>Change Password</h2>
    
    <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="currentPassword">Current Password</label>
        <div class="password-input-container">
          <input class="inp"
            [type]="showCurrentPassword ? 'text' : 'password'"
            id="currentPassword"
            formControlName="currentPassword"
            [class.error]="changePasswordForm.get('currentPassword')?.invalid && changePasswordForm.get('currentPassword')?.touched"
          >
          <button 
            type="button"
            class="btn toggle-password"
            (click)="togglePassword('current')"
          >
            {{ showCurrentPassword ? '👁️' : '👁️‍🗨️' }}
          </button>
        </div>
        <div class="error-message" *ngIf="changePasswordForm.get('currentPassword')?.invalid && changePasswordForm.get('currentPassword')?.touched">
          <span *ngIf="changePasswordForm.get('currentPassword')?.errors?.['required']">Current password is required</span>
          <span *ngIf="changePasswordForm.get('currentPassword')?.errors?.['minlength']">Password must be at least 6 characters</span>
        </div>
      </div>

      <div class="form-group">
        <label for="newPassword">New Password</label>
        <div class="password-input-container">
          <input class="inp"
            [type]="showNewPassword ? 'text' : 'password'"
            id="newPassword"
            formControlName="newPassword"
            [class.error]="changePasswordForm.get('newPassword')?.invalid && changePasswordForm.get('newPassword')?.touched"
          >
          <button 
            type="button"
            class="toggle-password btn"
            (click)="togglePassword('new')"
          >
            {{ showNewPassword ? '👁️' : '👁️‍🗨️' }}
          </button>
        </div>
        <div class="error-message" *ngIf="changePasswordForm.get('newPassword')?.invalid && changePasswordForm.get('newPassword')?.touched">
          <span *ngIf="changePasswordForm.get('newPassword')?.errors?.['required']">New password is required</span>
          <span *ngIf="changePasswordForm.get('newPassword')?.errors?.['minlength']">Password must be at least 6 characters</span>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirm Password</label>
        <div class="password-input-container">
          <input class="inp"
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirmPassword"
            formControlName="confirmPassword"
            [class.error]="changePasswordForm.get('confirmPassword')?.invalid && changePasswordForm.get('confirmPassword')?.touched"
          >
          <button 
            type="button"
            class="toggle-password btn"
            (click)="togglePassword('confirm')"
          >
            {{ showConfirmPassword ? '👁️' : '👁️‍🗨️' }}
          </button>
        </div>
        <div class="error-message" *ngIf="changePasswordForm.get('confirmPassword')?.touched">
          <span *ngIf="changePasswordForm.get('confirmPassword')?.errors?.['required']">Confirm password is required</span>
          <span *ngIf="changePasswordForm.errors?.['mismatch']">Passwords do not match</span>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn cancel-btn" (click)="closeModal()">Cancel</button>
        <button type="submit" class="btn submit-btn" [disabled]="changePasswordForm.invalid">
          Change Password
        </button>
      </div>
    </form>
  </div>
</div>